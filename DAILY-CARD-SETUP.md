# Daily Single Card Email Setup

A simplified daily tarot workflow that draws one card per day and emails it via Resend.

## Features

- Draws one random tarot card daily at 7 AM
- 50% chance of reversed/inverted orientation
- Beautiful HTML email design
- No external API dependencies (all cards in workflow)
- Simple 3-node workflow

## Setup Instructions

### 1. Import the Workflow

1. Open n8n
2. Click "Import from File"
3. Select `n8n-daily-single-card.json`

### 2. Configure Resend API Credentials

1. Get your Resend API key from [resend.com/api-keys](https://resend.com/api-keys)
2. In n8n, go to **Credentials** → **+ Add credential**
3. Select **Header Auth**
4. Configure:
   - **Name**: `Resend API`
   - **Credential Data**:
     - Name: `Authorization`
     - Value: `Bearer re_YOUR_API_KEY_HERE`
5. Save the credential

### 3. Set Environment Variables

In your n8n environment, set:

```bash
FROM_EMAIL=your-verified-email@yourdomain.com
TO_EMAIL=recipient@example.com
```

**Note**: For Resend, you need to verify your domain or use their test email `onboarding@resend.dev` for the FROM_EMAIL.

### 4. Test the Workflow

1. Open the workflow in n8n
2. Click "Execute Workflow" to test
3. Check your email for the daily card

### 5. Activate the Workflow

1. Toggle the workflow to "Active"
2. The workflow will run every day at 7:00 AM

## Customization

### Change the Schedule

Edit the "Schedule: Every Day at 7 AM" node:
- Current: `0 7 * * *` (7:00 AM daily)
- Example: `0 9 * * *` (9:00 AM daily)
- Example: `0 20 * * MON,WED,FRI` (8:00 PM on Mon, Wed, Fri)

### Modify the Email Design

Edit the `Draw Single Card` node's JavaScript code to customize:
- Colors and styling
- Email layout
- Card information displayed

## Workflow Structure

```
Schedule (7 AM daily)
    ↓
Draw Single Card (JavaScript)
    ↓
Send Email via Resend
```

## Email Preview

The email includes:
- SÍDHE branding header
- Card name prominently displayed
- Orientation (Upright/Inverted)
- Keywords as styled badges
- Card meaning description
- Elegant Celtic-inspired design

## Troubleshooting

### Emails Not Sending

1. Check Resend API key is correct
2. Verify FROM_EMAIL is a verified domain in Resend
3. Check n8n workflow execution logs for errors

### Wrong Email Address

Update the `TO_EMAIL` environment variable in n8n settings.

### Schedule Not Working

1. Ensure workflow is "Active"
2. Check timezone settings in n8n
3. Verify cron expression in Schedule node

## Next Steps

- Add multiple recipients by modifying the TO_EMAIL parameter to an array
- Create a web link for viewing card history
- Add notification preferences (skip weekends, etc.)

---

Generated by SÍDHE Celtic Tarot
